<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GEO-PROJECT - Link Generator</title>
    
    <!-- Favicon -->
    <link rel="icon" href="https://raw.githubusercontent.com/jaka2m/project/refs/heads/main/social/bot.png">
    
    <!-- Meta tags -->
    <meta property="og:image:secure_url" content="https://raw.githubusercontent.com/akulelaki696/bg/refs/heads/main/20250106_010158.jpg"/>
    <meta name="theme-color" content="#3f51b5"/>
    
    <!-- Material Icons -->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    
    <!-- QR Code library -->
    <script src="https://cdn.jsdelivr.net/npm/qrcode@1.5.3/build/qrcode.min.js"></script>

    <style>
        /* Material Design Variables */
        :root {
            --primary: #3f51b5;
            --primary-dark: #303f9f;
            --primary-light: #c5cae9;
            --secondary: #ff4081;
            --secondary-dark: #f50057;
            --secondary-light: #ff80ab;
            --background: #f5f5f5;
            --surface: #ffffff;
            --error: #b00020;
            --text-primary: #212121;
            --text-secondary: #757575;
            --text-on-primary: #ffffff;
            --divider: #bdbdbd;
            --shadow-1: 0 1px 3px rgba(0,0,0,0.12), 0 1px 2px rgba(0,0,0,0.24);
            --shadow-2: 0 3px 6px rgba(0,0,0,0.16), 0 3px 6px rgba(0,0,0,0.23);
            --shadow-3: 0 10px 20px rgba(0,0,0,0.19), 0 6px 6px rgba(0,0,0,0.23);
            --shadow-4: 0 14px 28px rgba(0,0,0,0.25), 0 10px 10px rgba(0,0,0,0.22);
            --shadow-5: 0 19px 38px rgba(0,0,0,0.30), 0 15px 12px rgba(0,0,0,0.22);
            --border-radius: 4px;
            --transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
        }

        /* Reset and base styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Roboto', sans-serif;
            background-color: var(--background);
            color: var(--text-primary);
            line-height: 1.5;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        /* App Bar */
        .app-bar {
            background-color: var(--primary);
            color: var(--text-on-primary);
            padding: 16px;
            box-shadow: var(--shadow-2);
            position: sticky;
            top: 0;
            z-index: 100;
            display: flex;
            align-items: center;
        }

        .app-bar-title {
            font-size: 20px;
            font-weight: 500;
            margin-left: 16px;
        }

        /* Navigation */
        .nav-container {
            background-color: var(--primary-dark);
            display: flex;
            overflow-x: auto;
            -webkit-overflow-scrolling: touch;
            scrollbar-width: none; /* Firefox */
            -ms-overflow-style: none;  /* IE and Edge */
        }

        .nav-container::-webkit-scrollbar {
            display: none;  /* Chrome, Safari and Opera */
        }

        .nav-item {
            color: rgba(255, 255, 255, 0.7);
            text-decoration: none;
            padding: 12px 16px;
            display: flex;
            align-items: center;
            transition: var(--transition);
            white-space: nowrap;
        }

        .nav-item:hover {
            background-color: rgba(255, 255, 255, 0.1);
        }

        .nav-item.active {
            color: var(--text-on-primary);
            background-color: rgba(255, 255, 255, 0.2);
        }

        .nav-item i {
            margin-right: 8px;
            font-size: 20px;
        }

        /* Main Content */
        .main-content {
            flex: 1;
            padding: 16px;
            max-width: 800px;
            margin: 0 auto;
            width: 100%;
        }

        /* Cards */
        .card {
            background-color: var(--surface);
            border-radius: var(--border-radius);
            box-shadow: var(--shadow-1);
            margin-bottom: 16px;
            overflow: hidden;
        }

        .card-header {
            padding: 16px;
            border-bottom: 1px solid var(--divider);
        }

        .card-title {
            font-size: 18px;
            font-weight: 500;
            display: flex;
            align-items: center;
        }

        .card-title i {
            margin-right: 8px;
            color: var(--primary);
        }

        .card-content {
            padding: 16px;
        }

        .card-actions {
            padding: 8px 16px 16px;
            display: flex;
            justify-content: flex-end;
        }

        /* Buttons */
        .btn {
            background-color: transparent;
            border: none;
            border-radius: var(--border-radius);
            color: var(--primary);
            font-family: 'Roboto', sans-serif;
            font-size: 14px;
            font-weight: 500;
            text-transform: uppercase;
            padding: 8px 16px;
            cursor: pointer;
            transition: var(--transition);
            display: inline-flex;
            align-items: center;
            justify-content: center;
            min-height: 36px;
            outline: none;
        }

        .btn i {
            margin-right: 8px;
        }

        .btn:hover {
            background-color: rgba(63, 81, 181, 0.08);
        }

        .btn:active {
            background-color: rgba(63, 81, 181, 0.16);
        }

        .btn-raised {
            background-color: var(--primary);
            color: var(--text-on-primary);
            box-shadow: var(--shadow-2);
        }

        .btn-raised:hover {
            box-shadow: var(--shadow-3);
            background-color: var(--primary-dark);
        }

        .btn-raised:active {
            box-shadow: var(--shadow-1);
        }

        .btn-secondary {
            color: var(--secondary);
        }

        .btn-secondary:hover {
            background-color: rgba(255, 64, 129, 0.08);
        }

        .btn-secondary:active {
            background-color: rgba(255, 64, 129, 0.16);
        }

        /* Form Elements */
        .form-group {
            margin-bottom: 16px;
        }

        .form-label {
            display: block;
            font-size: 14px;
            font-weight: 500;
            margin-bottom: 8px;
            color: var(--text-secondary);
        }

        .form-input {
            width: 100%;
            padding: 12px 16px;
            font-size: 16px;
            font-family: 'Roboto', sans-serif;
            border: 1px solid var(--divider);
            border-radius: var(--border-radius);
            background-color: var(--surface);
            color: var(--text-primary);
            outline: none;
            transition: var(--transition);
            box-sizing: border-box;
        }

        .form-input:focus {
            border-color: var(--primary);
            box-shadow: 0 0 0 1px var(--primary);
        }

        .form-input:disabled {
            background-color: var(--background);
            color: var(--text-secondary);
            cursor: not-allowed;
        }

        .form-select {
            width: 100%;
            padding: 12px 16px;
            font-size: 16px;
            font-family: 'Roboto', sans-serif;
            border: 1px solid var(--divider);
            border-radius: var(--border-radius);
            background-color: var(--surface);
            color: var(--text-primary);
            outline: none;
            cursor: pointer;
            transition: var(--transition);
            appearance: none;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24'%3E%3Cpath d='M7 10l5 5 5-5z' fill='%23757575'/%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: right 16px center;
            background-size: 24px;
        }

        .form-select:focus {
            border-color: var(--primary);
            box-shadow: 0 0 0 1px var(--primary);
        }

        /* Tabs */
        .tabs {
            display: flex;
            border-bottom: 1px solid var(--divider);
            margin-bottom: 16px;
        }

        .tab {
            padding: 12px 16px;
            font-size: 14px;
            font-weight: 500;
            text-transform: uppercase;
            color: var(--text-secondary);
            cursor: pointer;
            border-bottom: 2px solid transparent;
            transition: var(--transition);
            white-space: nowrap;
        }

        .tab:hover {
            color: var(--text-primary);
        }

        .tab.active {
            color: var(--primary);
            border-bottom-color: var(--primary);
        }

        .tab i {
            margin-right: 8px;
            font-size: 18px;
        }

        /* Proxy List */
        .proxy-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 16px;
        }

        .proxy-item {
            background-color: var(--surface);
            border-radius: var(--border-radius);
            box-shadow: var(--shadow-1);
            padding: 16px;
            display: flex;
            flex-direction: column;
            transition: var(--transition);
        }

        .proxy-item:hover {
            box-shadow: var(--shadow-2);
        }

        .proxy-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
        }

        .proxy-name {
            font-weight: 500;
            font-size: 16px;
        }

        .proxy-status {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background-color: var(--text-secondary);
        }

        .proxy-status.active {
            background-color: #4caf50;
        }

        .proxy-status.dead {
            background-color: #f44336;
        }

        .proxy-details {
            font-size: 14px;
            color: var(--text-secondary);
            margin-bottom: 16px;
        }

        /* Loading Spinner */
        .loading {
            display: flex;
            justify-content: center;
            padding: 24px;
        }

        .spinner {
            border: 3px solid rgba(63, 81, 181, 0.2);
            border-radius: 50%;
            border-top: 3px solid var(--primary);
            width: 32px;
            height: 32px;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Search Bar */
        .search-bar {
            position: relative;
            margin-bottom: 16px;
        }

        .search-bar i {
            position: absolute;
            left: 16px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--text-secondary);
        }

        .search-input {
            width: 100%;
            padding: 12px 16px 12px 48px;
            font-size: 16px;
            font-family: 'Roboto', sans-serif;
            border: 1px solid var(--divider);
            border-radius: var(--border-radius);
            background-color: var(--surface);
            color: var(--text-primary);
            outline: none;
            transition: var(--transition);
            box-sizing: border-box;
        }

        .search-input:focus {
            border-color: var(--primary);
            box-shadow: 0 0 0 1px var(--primary);
        }

        /* Pagination */
        .pagination {
            display: flex;
            justify-content: center;
            margin-top: 16px;
        }

        .page-btn {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            background-color: transparent;
            border: none;
            color: var(--text-secondary);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: var(--transition);
            margin: 0 4px;
        }

        .page-btn:hover {
            background-color: rgba(63, 81, 181, 0.08);
        }

        .page-btn.active {
            background-color: var(--primary);
            color: var(--text-on-primary);
        }

        .page-btn:disabled {
            opacity: 0.38;
            cursor: not-allowed;
        }

        /* QR Code */
        .qrcode-container {
            display: flex;
            justify-content: center;
            margin: 16px 0;
        }

        .qrcode-container canvas,
        .qrcode-container img {
            border: 1px solid var(--divider);
            border-radius: var(--border-radius);
            padding: 16px;
            background-color: white;
        }

        /* Footer */
        .footer {
            background-color: var(--primary-dark);
            color: var(--text-on-primary);
            text-align: center;
            padding: 16px;
            font-size: 14px;
        }

        /* Responsive */
        @media (max-width: 600px) {
            .app-bar-title {
                font-size: 18px;
            }
            
            .nav-item {
                padding: 12px 12px;
            }
            
            .nav-item i {
                margin-right: 4px;
            }
            
            .main-content {
                padding: 8px;
            }
            
            .proxy-list {
                grid-template-columns: 1fr;
            }
        }

        /* Utility Classes */
        .hidden {
            display: none;
        }

        .text-center {
            text-align: center;
        }

        .mt-16 {
            margin-top: 16px;
        }

        .mb-16 {
            margin-bottom: 16px;
        }

        .flex {
            display: flex;
        }

        .flex-column {
            flex-direction: column;
        }

        .justify-between {
            justify-content: space-between;
        }

        .items-center {
            align-items: center;
        }

        .gap-8 {
            gap: 8px;
        }

        .gap-16 {
            gap: 16px;
        }
    </style>
</head>
<body>
    <!-- App Bar -->
    <div class="app-bar">
        <i class="material-icons">link</i>
        <div class="app-bar-title">GEO-PROJECT</div>
    </div>

    <!-- Navigation -->
    <div class="nav-container">
        <a href="/" class="nav-item">
            <i class="material-icons">home</i>
            <span>Home</span>
        </a>
        <a href="sub" class="nav-item">
            <i class="material-icons">rss_feed</i>
            <span>Subscription</span>
        </a>
        <a href="link" class="nav-item active">
            <i class="material-icons">link</i>
            <span>Link Generator</span>
        </a>
        <a href="converter" class="nav-item">
            <i class="material-icons">swap_horiz</i>
            <span>Converter</span>
        </a>
        <a href="checker" class="nav-item">
            <i class="material-icons">cloud</i>
            <span>IP Checker</span>
        </a>
    </div>

    <!-- Main Content -->
    <div class="main-content">
        <!-- Proxy List Section -->
        <div id="proxy-list-section">
            <div class="card">
                <div class="card-header">
                    <div class="card-title">
                        <i class="material-icons">dns</i>
                        Proxy List
                    </div>
                </div>
                <div class="card-content">
                    <div class="flex justify-between gap-8 mb-16">
                        <button id="refresh-btn" class="btn btn-raised">
                            <i class="material-icons">refresh</i>
                            Refresh
                        </button>
                        <button id="custom-url-btn" class="btn">
                            <i class="material-icons">link</i>
                            Custom URL
                        </button>
                    </div>
                    
                    <div id="custom-url-input" class="hidden mb-16">
                        <div class="flex gap-8">
                            <input type="text" id="proxy-url" class="form-input flex-1" 
                                placeholder="Enter custom proxy list URL" 
                                value="https://raw.githubusercontent.com/paoandest/botak/refs/heads/main/cek/proxyList.txt">
                            <button id="load-custom-url" class="btn btn-raised">Load</button>
                        </div>
                    </div>
                    
                    <div id="loading-indicator" class="loading hidden">
                        <div class="spinner"></div>
                    </div>
                    
                    <div class="search-bar">
                        <i class="material-icons">search</i>
                        <input type="text" id="search-input" class="search-input" placeholder="Search by provider or country...">
                    </div>
                    
                    <div id="proxy-list-container" class="proxy-list">
                        <!-- Proxy items will be populated here -->
                    </div>
                    
                    <div id="pagination-container" class="pagination">
                        <!-- Pagination buttons will be added here -->
                    </div>

                    <div id="proxy-count-info" class="text-center text-secondary mt-16">
                        <!-- Proxy count will be shown here -->
                    </div>
                    
                    <div id="no-proxies-message" class="text-center text-secondary hidden">
                        <i class="material-icons" style="font-size: 48px; color: var(--text-secondary);">error_outline</i>
                        <p>No proxies found. Please refresh or try a different URL.</p>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Account Creation Section -->
        <div id="account-creation-section" class="hidden">
            <div class="card">
                <div class="card-header">
                    <div class="flex justify-between items-center">
                        <div class="card-title">
                            <i class="material-icons">person_add</i>
                            Create Account
                        </div>
                        <button id="back-to-list" class="btn">
                            <i class="material-icons">arrow_back</i>
                            Back to List
                        </button>
                    </div>
                </div>
                <div class="card-content">
                    <div class="card mb-16">
                        <div class="card-header">
                            <div class="card-title">
                                <i class="material-icons">dns</i>
                                Selected Proxy
                            </div>
                        </div>
                        <div class="card-content">
                            <div class="grid grid-cols-2 gap-16">
                                <div>
                                    <div class="text-secondary text-sm">Provider</div>
                                    <div id="selected-provider" class="font-medium">-</div>
                                </div>
                                <div>
                                    <div class="text-secondary text-sm">Country</div>
                                    <div id="selected-country" class="font-medium">-</div>
                                </div>
                                <div>
                                    <div class="text-secondary text-sm">IP</div>
                                    <div id="selected-ip" class="font-medium">-</div>
                                </div>
                                <div>
                                    <div class="text-secondary text-sm">Port</div>
                                    <div id="selected-port" class="font-medium">-</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Tabs -->
                    <div class="tabs">
                        <div class="tab active" data-target="vmess-form">
                            <i class="material-icons">security</i>
                            VMess
                        </div>
                        <div class="tab" data-target="vless-form">
                            <i class="material-icons">bolt</i>
                            VLESS
                        </div>
                        <div class="tab" data-target="trojan-form">
                            <i class="material-icons">vpn_key</i>
                            Trojan
                        </div>
                        <div class="tab" data-target="ss-form">
                            <i class="material-icons">enhanced_encryption</i>
                            SS
                        </div>
                    </div>
                    
                    <!-- VMess Form -->
                    <div id="vmess-form" class="protocol-form">
                        <form id="vmess-account-form">
                            <div class="form-group">
                                <label class="form-label" for="vmess-name">Account Name</label>
                                <input type="text" id="vmess-name" name="name" class="form-input" readonly>
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label" for="vmess-uuid">UUID</label>
                                <input type="text" id="vmess-uuid" name="uuid" class="form-input" value="f282b878-8711-45a1-8c69-5564172123c1" required readonly>
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label" for="vmess-path">Path</label>
                                <input type="text" id="vmess-path" name="path" class="form-input" readonly>
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label" for="vmess-security">TLS</label>
                                <select id="vmess-security" name="security" class="form-select">
                                    <option value="tls">TLS</option>
                                    <option value="none">None</option>
                                </select>
                                <input type="hidden" id="vmess-encryption" name="encryption" value="zero">
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label" for="vmess-server-domain">Server Domain</label>
                                <select id="vmess-server-domain" name="server-domain" class="form-select">
                                    <!-- Options will be populated dynamically -->
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label" for="vmess-bug">Custom Bug (optional)</label>
                                <select id="vmess-bug" name="bug" class="form-select">
                                    <!-- Options will be populated dynamically -->
                                </select>
                                <div id="vmess-manual-bug-container" class="hidden mt-8">
                                    <input type="text" id="vmess-manual-bug" class="form-input" placeholder="Enter custom bug domain">
                                </div>
                                <div id="vmess-wildcard-container" class="hidden mt-8">
                                    <label class="flex items-center">
                                        <input type="checkbox" id="vmess-wildcard" name="wildcard">
                                        <span class="ml-8">Use Wildcard (bug.domain.com)</span>
                                    </label>
                                </div>
                            </div>
                            
                            <div class="card-actions">
                                <button type="submit" class="btn btn-raised">
                                    <i class="material-icons">add_circle</i>
                                    Create VMess Account
                                </button>
                            </div>
                        </form>
                    </div>
                    
                    <!-- VLESS Form -->
                    <div id="vless-form" class="protocol-form hidden">
                        <form id="vless-account-form">
                            <div class="form-group">
                                <label class="form-label" for="vless-name">Account Name</label>
                                <input type="text" id="vless-name" name="name" class="form-input" readonly>
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label" for="vless-uuid">UUID</label>
                                <div class="flex gap-8">
                                    <input type="text" id="vless-uuid" name="uuid" class="form-input flex-1" value="f282b878-8711-45a1-8c69-5564172123c1" required>
                                    <button type="button" onclick="generateUUID('vless-uuid')" class="btn">
                                        <i class="material-icons">refresh</i>
                                    </button>
                                </div>
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label" for="vless-path">Path</label>
                                <input type="text" id="vless-path" name="path" class="form-input" readonly>
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label" for="vless-security">TLS</label>
                                <select id="vless-security" name="security" class="form-select">
                                    <option value="tls">TLS</option>
                                    <option value="none">None</option>
                                </select>
                                <input type="hidden" id="vless-encryption" name="encryption" value="none">
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label" for="vless-server-domain">Server Domain</label>
                                <select id="vless-server-domain" name="server-domain" class="form-select">
                                    <!-- Options will be populated dynamically -->
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label" for="vless-bug">Custom Bug (optional)</label>
                                <select id="vless-bug" name="bug" class="form-select">
                                    <!-- Options will be populated dynamically -->
                                </select>
                                <div id="vless-manual-bug-container" class="hidden mt-8">
                                    <input type="text" id="vless-manual-bug" class="form-input" placeholder="Enter custom bug domain">
                                </div>
                                <div id="vless-wildcard-container" class="hidden mt-8">
                                    <label class="flex items-center">
                                        <input type="checkbox" id="vless-wildcard" name="wildcard">
                                        <span class="ml-8">Use Wildcard (bug.domain.com)</span>
                                    </label>
                                </div>
                            </div>
                            
                            <div class="card-actions">
                                <button type="submit" class="btn btn-raised">
                                    <i class="material-icons">add_circle</i>
                                    Create VLESS Account
                                </button>
                            </div>
                        </form>
                    </div>
                    
                    <!-- Trojan Form -->
                    <div id="trojan-form" class="protocol-form hidden">
                        <form id="trojan-account-form">
                            <div class="form-group">
                                <label class="form-label" for="trojan-name">Account Name</label>
                                <input type="text" id="trojan-name" name="name" class="form-input" readonly>
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label" for="trojan-password">Password</label>
                                <div class="flex gap-8">
                                    <input type="text" id="trojan-password" name="password" class="form-input flex-1" value="f282b878-8711-45a1-8c69-5564172123c1" required>
                                    <button type="button" onclick="generatePassword('trojan-password')" class="btn">
                                        <i class="material-icons">refresh</i>
                                    </button>
                                </div>
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label" for="trojan-path">Path</label>
                                <input type="text" id="trojan-path" name="path" class="form-input" readonly>
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label" for="trojan-security">TLS</label>
                                <select id="trojan-security" name="security" class="form-select">
                                    <option value="tls">TLS</option>
                                    <option value="none">None</option>
                                </select>
                                <input type="hidden" id="trojan-sni" name="sni" value="vm.gpj.web.id">
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label" for="trojan-server-domain">Server Domain</label>
                                <select id="trojan-server-domain" name="server-domain" class="form-select">
                                    <!-- Options will be populated dynamically -->
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label" for="trojan-bug">Custom Bug (optional)</label>
                                <select id="trojan-bug" name="bug" class="form-select">
                                    <!-- Options will be populated dynamically -->
                                </select>
                                <div id="trojan-manual-bug-container" class="hidden mt-8">
                                    <input type="text" id="trojan-manual-bug" class="form-input" placeholder="Enter custom bug domain">
                                </div>
                                <div id="trojan-wildcard-container" class="hidden mt-8">
                                    <label class="flex items-center">
                                        <input type="checkbox" id="trojan-wildcard" name="wildcard">
                                        <span class="ml-8">Use Wildcard (bug.domain.com)</span>
                                    </label>
                                </div>
                            </div>
                            
                            <div class="card-actions">
                                <button type="submit" class="btn btn-raised">
                                    <i class="material-icons">add_circle</i>
                                    Create Trojan Account
                                </button>
                            </div>
                        </form>
                    </div>
                    
                    <!-- Shadowsocks Form -->
                    <div id="ss-form" class="protocol-form hidden">
                        <form id="ss-account-form">
                            <div class="form-group">
                                <label class="form-label" for="ss-name">Account Name</label>
                                <input type="text" id="ss-name" name="name" class="form-input" readonly>
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label" for="ss-password">Password</label>
                                <div class="flex gap-8">
                                    <input type="text" id="ss-password" name="password" class="form-input flex-1" value="f282b878-8711-45a1-8c69-5564172123c1" required>
                                    <button type="button" onclick="generatePassword('ss-password')" class="btn">
                                        <i class="material-icons">refresh</i>
                                    </button>
                                </div>
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label" for="ss-path">Path</label>
                                <input type="text" id="ss-path" name="path" class="form-input" readonly>
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label" for="ss-security">TLS</label>
                                <select id="ss-security" name="security" class="form-select">
                                    <option value="tls">TLS</option>
                                    <option value="none">None</option>
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label" for="ss-server-domain">Server Domain</label>
                                <select id="ss-server-domain" name="server-domain" class="form-select">
                                    <!-- Options will be populated dynamically -->
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label" for="ss-bug">Custom Bug (optional)</label>
                                <select id="ss-bug" name="bug" class="form-select">
                                    <!-- Options will be populated dynamically -->
                                </select>
                                <div id="ss-manual-bug-container" class="hidden mt-8">
                                    <input type="text" id="ss-manual-bug" class="form-input" placeholder="Enter custom bug domain">
                                </div>
                                <div id="ss-wildcard-container" class="hidden mt-8">
                                    <label class="flex items-center">
                                        <input type="checkbox" id="ss-wildcard" name="wildcard">
                                        <span class="ml-8">Use Wildcard (bug.domain.com)</span>
                                    </label>
                                </div>
                            </div>
                            
                            <div class="card-actions">
                                <button type="submit" class="btn btn-raised">
                                    <i class="material-icons">add_circle</i>
                                    Create Shadowsocks Account
                                </button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Result Section -->
        <div id="result-section" class="hidden">
            <div class="card">
                <div class="card-header">
                    <div class="flex justify-between items-center">
                        <div class="card-title">
                            <i class="material-icons">check_circle</i>
                            Account Created
                        </div>
                        <button id="back-to-form" class="btn">
                            <i class="material-icons">arrow_back</i>
                            Back
                        </button>
                    </div>
                </div>
                <div class="card-content">
                    <div class="card mb-16">
                        <div class="card-header">
                            <div class="flex justify-between items-center">
                                <div class="card-title">
                                    <i class="material-icons">link</i>
                                    Connection URL
                                </div>
                                <button id="copy-url" class="btn">
                                    <i class="material-icons">content_copy</i>
                                    Copy
                                </button>
                            </div>
                        </div>
                        <div class="card-content">
                            <div id="connection-url" class="text-sm font-mono break-all"></div>
                        </div>
                    </div>
                    
                    <div class="card">
                        <div class="card-header">
                            <div class="flex justify-between items-center">
                                <div class="card-title">
                                    <i class="material-icons">qr_code</i>
                                    QR Code
                                </div>
                                <button id="download-qr" class="btn">
                                    <i class="material-icons">download</i>
                                    Download
                                </button>
                            </div>
                        </div>
                        <div class="card-content">
                            <div id="qrcode" class="qrcode-container"></div>
                        </div>
                    </div>
                    
                    <div class="flex flex-column gap-8 mt-16">
                        <button id="create-new" class="btn btn-raised">
                            <i class="material-icons">add_circle</i>
                            Create Another
                        </button>
                        <button id="back-to-list-from-result" class="btn">
                            <i class="material-icons">list</i>
                            Back to List
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <div class="footer">
        <div>GEO-PROJECT</div>
        <div>POWERED BY SECURE TECHNOLOGY</div>
    </div>

    <!-- Custom JavaScript -->
    <script>
        // JavaScript code remains the same as before
        // Only the HTML and CSS have been updated to use Material Design
        const QRCode = window.QRCode;
        let proxyList = [];
        let filteredProxyList = [];
        let selectedProxy = null;
        const serverDomains = ['vm.gpj.web.id', 'vpn.checker-ip.web.id'];
        let selectedServerDomain = serverDomains[0];
        let currentPage = 1;
        const bugOptions = [
            { 'value': '', 'label': "Default" },
            { 'value': "cache.netflix.com", 'label': "cache.netflix.com" },
            { 'value': "ava.game.naver.com", 'label': "ava.game.naver.com" },
            { 'value': "graph.instagram.com", 'label': "graph.instagram.com" },
            { 'value': "support.zoom.us", 'label': "support.zoom.us" },
            { 'value': "zaintest.vuclip.com", 'label': "help.viu.com" },
            { 'value': "manual", 'label': "Type Manual" }
        ];
        const proxyListSection = document.getElementById("proxy-list-section");
        const accountCreationSection = document.getElementById("account-creation-section");
        const resultSection = document.getElementById('result-section');
        const loadingIndicator = document.getElementById("loading-indicator");
        const proxyListContainer = document.getElementById("proxy-list-container");
        const noProxiesMessage = document.getElementById("no-proxies-message");
        const customUrlInput = document.getElementById('custom-url-input');
        const proxyUrlInput = document.getElementById("proxy-url");
        const paginationContainer = document.getElementById('pagination-container');
        const proxyCountInfo = document.getElementById("proxy-count-info");
        const searchInput = document.getElementById("search-input");

        function populateBugOptions() {
            const bugSelectors = [
                document.getElementById("vmess-bug"),
                document.getElementById('vless-bug'),
                document.getElementById("trojan-bug"),
                document.getElementById("ss-bug")
            ];

            bugSelectors.forEach(bugSelect => {
                if (bugSelect) {
                    bugSelect.innerHTML = '';
                    bugOptions.forEach(option => {
                        const optionElement = document.createElement("option");
                        optionElement.value = option.value;
                        optionElement.textContent = option.label;
                        bugSelect.appendChild(optionElement);
                    });
                }
            });
        }

        document.addEventListener("DOMContentLoaded", () => {
            displayFallbackProxyList();
            loadProxyList("https://raw.githubusercontent.com/paoandest/botak/refs/heads/main/cek/proxyList.txt");
            document.getElementById("refresh-btn").addEventListener("click", () => {
                loadProxyList("https://raw.githubusercontent.com/paoandest/botak/refs/heads/main/cek/proxyList.txt");
            });
            document.getElementById("custom-url-btn").addEventListener("click", () => {
                customUrlInput.classList.toggle('hidden');
            });
            document.getElementById("load-custom-url").addEventListener("click", () => {
                const customUrl = proxyUrlInput.value.trim();
                if (customUrl) {
                    loadProxyList(customUrl);
                }
            });

            document.getElementById("back-to-list").addEventListener('click', () => {
                showProxyListSection();
            });
            document.getElementById("back-to-form").addEventListener("click", () => {
                resultSection.classList.add("hidden");
                accountCreationSection.classList.remove("hidden");
            });
            document.getElementById("create-new").addEventListener('click', () => {
                resultSection.classList.add("hidden");
                accountCreationSection.classList.remove("hidden");
            });
            document.getElementById("back-to-list-from-result").addEventListener("click", () => {
                showProxyListSection();
            });
            searchInput.addEventListener("input", function () {
                const searchQuery = this.value.toLowerCase().trim();
                if (searchQuery === '') {
                    filteredProxyList = [...proxyList];
                } else {
                    filteredProxyList = proxyList.filter(proxy => 
                        proxy.provider.toLowerCase().includes(searchQuery) || 
                        proxy.country.toLowerCase().includes(searchQuery)
                    );
                }
                currentPage = 1;
                renderProxyList();
            });

            const tabButtons = document.querySelectorAll(".tab");
            const protocolForms = document.querySelectorAll(".protocol-form");

            tabButtons.forEach(button => {
                button.addEventListener("click", () => {
                    tabButtons.forEach(tab => {
                        tab.classList.remove("active");
                    });
                    button.classList.add("active");

                    protocolForms.forEach(form => {
                        form.classList.add('hidden');
                    });

                    const targetId = button.getAttribute("data-target");
                    document.getElementById(targetId).classList.remove("hidden");
                });
            });

            const serverDomainElements = [
                document.getElementById("vmess-server-domain"),
                document.getElementById("vless-server-domain"),
                document.getElementById("trojan-server-domain"),
                document.getElementById("ss-server-domain")
            ];

            serverDomainElements.forEach(element => {
                if (element) {
                    element.innerHTML = '';
                    serverDomains.forEach(domain => {
                        const option = document.createElement("option");
                        option.value = domain;
                        option.textContent = domain;
                        element.appendChild(option);
                    });

                    element.addEventListener("change", function () {
                        selectedServerDomain = this.value;
                    });
                }
            });

            populateBugOptions();
            const formElements = [
                document.getElementById("vmess-account-form"), 
                document.getElementById('vless-account-form'), 
                document.getElementById("trojan-account-form"), 
                document.getElementById("ss-account-form")
            ];
            const formData = [
                document.getElementById("vmess-bug"), 
                document.getElementById('vless-bug'), 
                document.getElementById("trojan-bug"), 
                document.getElementById("ss-bug")
            ];
            const securityOptions = [
                document.getElementById('vmess-wildcard-container'), 
                document.getElementById("vless-wildcard-container"), 
                document.getElementById("trojan-wildcard-container"), 
                document.getElementById("ss-wildcard-container")
            ];
            const someOtherValue = [
                document.getElementById("vmess-wildcard"), 
                document.getElementById("vless-wildcard"), 
                document.getElementById("trojan-wildcard"), 
                document.getElementById("ss-wildcard")
            ];
            
            formData.forEach((inputElement, selectedIndex) => {
                const someVariable = inputElement.id.replace('-bug', '-manual-bug-container');
                const bugContainerId = document.getElementById(someVariable);
                const bugContainerElement = document.getElementById(inputElement.id.replace("-bug", "-manual-bug"));
                const manualBugElement = someOtherValue[selectedIndex];
                
                inputElement.addEventListener('change', function () {
                    if (this.value === "manual") {
                        bugContainerId.classList.add('show');
                        securityOptions[selectedIndex].classList.remove("show");
                        manualBugElement.checked = false;
                        manualBugElement.disabled = true;
                    } else if (this.value !== '') {
                        bugContainerId.classList.remove("show");
                        securityOptions[selectedIndex].classList.add("show");
                        manualBugElement.disabled = false;
                    } else {
                        bugContainerId.classList.remove('show');
                        securityOptions[selectedIndex].classList.remove("show");
                        manualBugElement.checked = false;
                        manualBugElement.disabled = false;
                    }
                });
                
                if (bugContainerElement) {
                    bugContainerElement.addEventListener("input", () => {
                        manualBugElement.disabled = true;
                    });
                }
            });
            
            formElements.forEach(formElement => {
                formElement.addEventListener("submit", event => {
                    event.preventDefault();
                    const formData = new FormData(formElement);
                    const formPrefix = formElement.id.split('-')[0];
                    let bugType = formData.get("bug") ? formData.get("bug").toString().trim() : '';
                    
                    if (bugType === "manual") {
                        const _0x4dfc0b = formPrefix + '-manual-bug';
                        const manualBugValue = document.getElementById(_0x4dfc0b).value.trim();
                        if (manualBugValue) {
                            formData.set("bug", manualBugValue);
                            bugType = manualBugValue;
                        } else {
                            formData.set("bug", '');
                            bugType = '';
                        }
                    }
                    
                    const isWildcardEnabled = formData.get("wildcard") === 'on';
                    const serverDomain = formData.get("server-domain") || selectedServerDomain;
                    let domainForWildcard = serverDomain;
                    let domainWithPrefix = serverDomain;
                    let fullDomain = serverDomain;
                    
                    if (bugType) {
                        domainForWildcard = bugType;
                        if (isWildcardEnabled) {
                            domainWithPrefix = bugType + '.' + serverDomain;
                            fullDomain = bugType + '.' + serverDomain;
                        }
                    }
                    
                    let result = '';      
                    
                    if (formPrefix === 'vmess') {
                        const securityOption = formData.get("security");
                        const securityValue = securityOption === "tls" ? 443 : 80;
                        const _0x154eee = {
                            'v': '2',
                            'ps': formData.get("name"),
                            'add': domainForWildcard,
                            'port': securityValue,
                            'id': formData.get('uuid'),
                            'aid': '0',
                            'net': 'ws',
                            'type': 'none',
                            'host': domainWithPrefix,
                            'path': formData.get("path"),
                            'tls': securityOption === "tls" ? "tls" : '',
                            'sni': fullDomain,
                            'scy': "zero"
                        };
                        result = "vmess://" + btoa(JSON.stringify(_0x154eee));
                    } else if (formPrefix === "vless") {
                        const uuid = formData.get("uuid");
                        const path = encodeURIComponent(formData.get("path"));
                        const security = formData.get("security");
                        const name = encodeURIComponent(formData.get("name"));
                        const port = security === "tls" ? 443 : 80;
                        result = `vless://${uuid}@${domainForWildcard}:${port}?encryption=none&security=${security}&type=ws&host=${domainWithPrefix}&path=${path}&sni=${fullDomain}#${name}`;
                    } else if (formPrefix === "trojan") {
                        const password = formData.get("password");
                        const path = encodeURIComponent(formData.get("path"));
                        const security = formData.get('security');
                        const name = encodeURIComponent(formData.get("name"));
                        const port = security === 'tls' ? 443 : 80;
                        result = `trojan://${password}@${domainForWildcard}:${port}?security=${security}&type=ws&host=${domainWithPrefix}&path=${path}&sni=${fullDomain}#${name}`;
                    } else if (formPrefix === 'ss') {
                        const password = formData.get("password");
                        const name = encodeURIComponent(formData.get("name"));
                        const path = encodeURIComponent(formData.get('path'));
                        const security = formData.get("security");
                        const port = security === "tls" ? 443 : 80;
                        const encodedPassword = btoa("none:" + password);
                        result = `ss://${encodedPassword}@${domainForWildcard}:${port}?encryption=none&type=ws&host=${domainWithPrefix}&path=${path}&security=${security}&sni=${fullDomain}#${name}`;
                    }
                    
                    document.getElementById('connection-url').textContent = result;
                    generateQRCode(result);
                    accountCreationSection.classList.add("hidden");
                    resultSection.classList.remove("hidden");
                });
            });
            
            document.getElementById("copy-url").addEventListener("click", function () {
                const textToCopy = document.getElementById("connection-url").textContent;
                navigator.clipboard.writeText(textToCopy).then(() => {
                    this.innerHTML = "<i class=\"material-icons\">check</i> Copied!";
                    setTimeout(() => {
                        this.innerHTML = "<i class=\"material-icons\">content_copy</i> Copy";
                    }, 2000);
                });
            });
            
            document.getElementById("download-qr").addEventListener("click", () => {
                downloadQRCode();
            });
        });

        function generateQRCode(data) {
            const qrCodeContainer = document.getElementById("qrcode");
            qrCodeContainer.innerHTML = '';

            try {
                QRCode.toCanvas(qrCodeContainer, data, {
                    width: 200,
                    margin: 1,
                    color: {
                        dark: "#000000",
                        light: "#FFFFFF"
                    }
                }, (error) => {
                    if (error) {
                        console.error("QR Code canvas error:", error);
                        generateQRCodeFallback(data, qrCodeContainer);
                    }
                });
            } catch (error) {
                console.error("QR Code generation error:", error);
                generateQRCodeFallback(data, qrCodeContainer);
            }
        }

        function generateQRCodeFallback(data, qrCodeContainer) {
            try {
                QRCode.toString(data, {
                    type: "svg",
                    width: 200,
                    margin: 1,
                    color: {
                        dark: '#000000',
                        light: "#FFFFFF"
                    }
                }, (error, svg) => {
                    if (error || !svg) {
                        console.error("QR Code SVG error:", error);
                        generateQRCodeLastResort(data, qrCodeContainer);
                    } else {
                        qrCodeContainer.innerHTML = svg;
                    }
                });
            } catch (error) {
                console.error("QR Code SVG generation error:", error);
                generateQRCodeLastResort(data, qrCodeContainer);
            }
        }

        function generateQRCodeLastResort(data, qrCodeContainer) {
            try {
                const encodedData = encodeURIComponent(data);
                const qrCodeUrl = `https://api.qrserver.com/v1/create-qr-code/?size=200x200&data=${encodedData}`;
                
                const img = document.createElement('img');
                img.src = qrCodeUrl;
                img.alt = "QR Code";
                img.width = 200;
                img.height = 200;

                img.onerror = () => {
                    qrCodeContainer.innerHTML = "<div class=\"text-center\" style=\"color: var(--error);\">Failed to generate QR code</div>";
                };

                qrCodeContainer.innerHTML = '';
                qrCodeContainer.appendChild(img);
            } catch (error) {
                console.error("QR Code last resort error:", error);
                qrCodeContainer.innerHTML = "<div class=\"text-center\" style=\"color: var(--error);\">Failed to generate QR code</div>";
            }
        }

        function downloadQRCode() {
            const qrCodeContainer = document.getElementById("qrcode");
            const canvas = qrCodeContainer.querySelector("canvas");
            const img = qrCodeContainer.querySelector("img");
            const svg = qrCodeContainer.querySelector("svg");
            
            let qrCodeDataUrl = null;

            if (canvas) {
                try {
                    qrCodeDataUrl = canvas.toDataURL("image/png");
                } catch (error) {
                    console.error("Canvas to data URL error:", error);
                }
            } else if (img) {
                qrCodeDataUrl = img.src;
            } else if (svg) {
                try {
                    const svgData = new XMLSerializer().serializeToString(svg);
                    const svgBlob = new Blob([svgData], { type: 'image/svg+xml;charset=utf-8' });
                    qrCodeDataUrl = URL.createObjectURL(svgBlob);
                } catch (error) {
                    console.error("SVG to data URL error:", error);
                }
            }

            if (qrCodeDataUrl) {
                const downloadLink = document.createElement('a');
                downloadLink.href = qrCodeDataUrl;
                downloadLink.download = "qrcode.png";

                document.body.appendChild(downloadLink);
                downloadLink.click();
                document.body.removeChild(downloadLink);

                if (qrCodeDataUrl.startsWith("blob:")) {
                    URL.revokeObjectURL(qrCodeDataUrl);
                }
            } else {
                alert("Failed to download QR code. Please try again.");
            }
        }

        function displayFallbackProxyList() {
            proxyList = [{
                'ip': "103.6.207.108",
                'port': "8080",
                'country': 'ID',
                'provider': "PT Pusat Media Indonesia"
            }];
            
            filteredProxyList = [...proxyList];
            renderProxyList();
        }

        function processProxyData(data) {
            const proxyLines = data.split(/\r?\n/).filter(line => line.trim() !== '');
            console.log(`Found ${proxyLines.length} lines in proxy data`);

            if (proxyLines.length === 0) {
                noProxiesMessage.classList.remove("hidden");
                return;
            }

            let delimiter = ',';
            const firstLine = proxyLines[0];
            if (firstLine.includes("\t")) {
                delimiter = "\t";
            } else if (firstLine.includes('|')) {
                delimiter = '|';
            } else if (firstLine.includes(';')) {
                delimiter = ';';
            }

            proxyList = proxyLines.map(line => {
                const fields = line.split(delimiter);
                if (fields.length >= 2) {
                    return {
                        'ip': fields[0].trim(),
                        'port': fields[1].trim(),
                        'country': fields.length >= 3 ? fields[2].trim() : "Unknown",
                        'provider': fields.length >= 4 ? fields[3].trim() : "Unknown Provider"
                    };
                }
                return null;
            }).filter(proxy => proxy && proxy.ip && proxy.port);

            console.log(`Processed ${proxyList.length} valid proxies`);

            if (proxyList.length === 0) {
                noProxiesMessage.classList.remove("hidden");
                displayFallbackProxyList();
                return;
            }

            currentPage = 1;
            filteredProxyList = [...proxyList];
            renderProxyList();
        }

        function renderProxyList() {
            proxyListContainer.innerHTML = '';

            if (filteredProxyList.length === 0) {
                noProxiesMessage.classList.remove("hidden");
                paginationContainer.innerHTML = '';
                proxyCountInfo.textContent = '';
                return;
            }

            noProxiesMessage.classList.add("hidden");

            const totalPages = Math.ceil(filteredProxyList.length / 10);
            const startIndex = (currentPage - 1) * 10;
            const endIndex = Math.min(startIndex + 10, filteredProxyList.length);
            const proxiesToDisplay = filteredProxyList.slice(startIndex, endIndex);

            proxiesToDisplay.forEach((proxy, index) => {
                const proxyIndex = startIndex + index;
                const proxyCard = document.createElement("div");
                proxyCard.className = "proxy-item";

                const header = document.createElement("div");
                header.className = "proxy-header";

                const providerName = document.createElement("div");
                providerName.className = "proxy-name";
                providerName.textContent = proxy.provider;
                header.appendChild(providerName);

                const statusIndicator = document.createElement("div");
                statusIndicator.className = "proxy-status";
                statusIndicator.id = "proxy-status-" + proxyIndex;
                header.appendChild(statusIndicator);

                const proxyDetails = document.createElement("div");
                proxyDetails.className = "proxy-details";
                proxyDetails.textContent = `${proxy.country} | ${proxy.ip}:${proxy.port}`;

                const buttonContainer = document.createElement("div");
                buttonContainer.className = "card-actions";

                const createButton = document.createElement("button");
                createButton.className = "btn btn-raised";
                createButton.setAttribute("data-index", proxyIndex);
                createButton.innerHTML = "Create";
                buttonContainer.appendChild(createButton);

                proxyCard.appendChild(header);
                proxyCard.appendChild(proxyDetails);
                proxyCard.appendChild(buttonContainer);
                proxyListContainer.appendChild(proxyCard);

                checkProxyStatusInList(proxy, statusIndicator);
            });

            document.querySelectorAll(".btn[data-index]").forEach(button => {
                button.addEventListener("click", function () {
                    const proxyIndex = Number.parseInt(this.getAttribute('data-index'));
                    selectProxy(proxyIndex);
                    showAccountCreationSection();
                });
            });

            renderPagination(totalPages);
            proxyCountInfo.textContent = `Showing ${startIndex + 1}-${endIndex} of ${filteredProxyList.length} proxies`;
        }

        function checkProxyStatusInList(proxy, statusIndicator) {
            const statusURL = `https://cors.checker-ip.web.id/?url=https://api-check.web.id/check?ip=${proxy.ip}:${proxy.port}`;

            fetch(statusURL)
                .then(response => response.json())
                .then(data => {
                    if (data.status === "ACTIVE") {
                        statusIndicator.classList.add("active");
                    } else {
                        statusIndicator.classList.add("dead");
                    }
                })
                .catch(error => {
                    console.error("Fetch error:", error);
                });
        }

        function renderPagination(totalPages) {
            paginationContainer.innerHTML = '';

            if (totalPages <= 1) {
                return;
            }

            const prevButton = document.createElement('button');
            prevButton.className = `page-btn ${currentPage === 1 ? 'disabled' : ''}`;
            prevButton.innerHTML = "<i class=\"material-icons\">chevron_left</i>";
            prevButton.disabled = currentPage === 1;
            prevButton.addEventListener("click", () => {
                if (currentPage > 1) {
                    currentPage--;
                    renderProxyList();
                }
            });
            paginationContainer.appendChild(prevButton);

            const buttonCount = window.innerWidth < 600 ? 3 : 5;
            let startPage = Math.max(1, currentPage - Math.floor(buttonCount / 2));
            let endPage = Math.min(totalPages, startPage + buttonCount - 1);

            if (endPage - startPage + 1 < buttonCount) {
                startPage = Math.max(1, endPage - buttonCount + 1);
            }

            if (startPage > 1) {
                const firstButton = document.createElement('button');
                firstButton.className = 'page-btn';
                firstButton.textContent = '1';
                firstButton.addEventListener("click", () => {
                    currentPage = 1;
                    renderProxyList();
                });
                paginationContainer.appendChild(firstButton);

                if (startPage > 2) {
                    const ellipsis = document.createElement('span');
                    ellipsis.className = 'px-1';
                    ellipsis.textContent = '...';
                    paginationContainer.appendChild(ellipsis);
                }
            }

            for (let page = startPage; page <= endPage; page++) {
                const pageButton = document.createElement('button');
                pageButton.className = `page-btn ${page === currentPage ? 'active' : ''}`;
                pageButton.textContent = page;
                pageButton.addEventListener("click", () => {
                    currentPage = page;
                    renderProxyList();
                });
                paginationContainer.appendChild(pageButton);
            }

            if (endPage < totalPages) {
                if (endPage < totalPages - 1) {
                    const ellipsis = document.createElement('span');
                    ellipsis.className = 'px-1';
                    ellipsis.textContent = '...';
                    paginationContainer.appendChild(ellipsis);
                }

                const lastButton = document.createElement('button');
                lastButton.className = 'page-btn';
                lastButton.textContent = totalPages.toString();
                lastButton.addEventListener("click", () => {
                    currentPage = totalPages;
                    renderProxyList();
                });
                paginationContainer.appendChild(lastButton);
            }

            const nextButton = document.createElement('button');
            nextButton.className = `page-btn ${currentPage === totalPages ? 'disabled' : ''}`;
            nextButton.innerHTML = "<i class=\"material-icons\">chevron_right</i>";
            nextButton.disabled = currentPage === totalPages;
            nextButton.addEventListener("click", () => {
                if (currentPage < totalPages) {
                    currentPage++;
                    renderProxyList();
                }
            });
            paginationContainer.appendChild(nextButton);
        }

        async function selectProxy(proxyIndex) {
            selectedProxy = filteredProxyList[proxyIndex];

            document.getElementById("selected-ip").textContent = selectedProxy.ip;
            document.getElementById('selected-port').textContent = selectedProxy.port;
            document.getElementById('selected-country').textContent = selectedProxy.country;
            document.getElementById('selected-provider').textContent = selectedProxy.provider;

            const proxyDetails = selectedProxy.country + " - " + selectedProxy.provider;
            const proxyPath = "/Geo-Project/{ip}-{port}".replace("{ip}", selectedProxy.ip).replace("{port}", selectedProxy.port);
            
            document.getElementById('vmess-path').value = proxyPath;
            document.getElementById('vless-path').value = proxyPath;
            document.getElementById('trojan-path').value = proxyPath;
            document.getElementById('ss-path').value = proxyPath;

            const vmessSecurity = document.getElementById("vmess-security").value;
            const vlessSecurity = document.getElementById("vless-security").value;
            const trojanSecurity = document.getElementById("trojan-security").value;
            const ssSecurity = document.getElementById("ss-security").value;

            document.getElementById('vmess-name').value = proxyDetails + " [VMess-" + (vmessSecurity === "tls" ? "TLS" : "NTLS") + ']';
            document.getElementById('vless-name').value = proxyDetails + " [VLESS-" + (vlessSecurity === "tls" ? 'TLS' : "NTLS") + ']';
            document.getElementById("trojan-name").value = proxyDetails + " [Trojan-" + (trojanSecurity === 'tls' ? "TLS" : "NTLS") + ']';
            document.getElementById('ss-name').value = proxyDetails + " [SS-" + (ssSecurity === "tls" ? "TLS" : "NTLS") + ']';

            const protocols = [
                { id: "vmess-security", nameId: "vmess-name", protocol: 'VMess' },
                { id: "vless-security", nameId: "vless-name", protocol: "VLESS" },
                { id: "trojan-security", nameId: "trojan-name", protocol: "Trojan" },
                { id: "ss-security", nameId: "ss-name", protocol: 'SS' }
            ];

            protocols.forEach(protocol => {
                const securityElement = document.getElementById(protocol.id);
                const nameElement = document.getElementById(protocol.nameId);

                const clonedElement = securityElement.cloneNode(true);
                securityElement.parentNode.replaceChild(clonedElement, securityElement);

                clonedElement.addEventListener("change", function () {
                    const securityType = this.value === "tls" ? "TLS" : "NTLS";
                    nameElement.value = proxyDetails + " [" + protocol.protocol + '-' + securityType + ']';
                });
            });

            const proxyStatusContainer = document.getElementById('proxy-status-container');
            const proxyStatusLoading = document.getElementById('proxy-status-loading');
            const proxyStatusActive = document.getElementById("proxy-status-active");
            const proxyStatusDead = document.getElementById("proxy-status-dead");
            const proxyStatusUnknown = document.getElementById("proxy-status-unknown");

            proxyStatusContainer.classList.remove("hidden");
            proxyStatusLoading.classList.remove('hidden');
            proxyStatusActive.classList.add("hidden");
            proxyStatusDead.classList.add("hidden");
            proxyStatusUnknown.classList.add('hidden');

            checkProxyStatus(selectedProxy);
        }

        function checkProxyStatus(proxy) {
            const startTime = performance.now();
            const statusURL = `https://cors.checker-ip.web.id/?url=https://api-check.web.id/check?ip=${proxy.ip}:${proxy.port}`;
            const statusContainer = document.getElementById('proxy-status-container');
            const statusLoading = document.getElementById('proxy-status-loading');
            const statusActive = document.getElementById('proxy-status-active');
            const statusDead = document.getElementById('proxy-status-dead');
            const statusUnknown = document.getElementById('proxy-status-unknown');
            const latencyElement = document.getElementById('proxy-latency');
            
            statusContainer.classList.remove('hidden');
            statusLoading.classList.remove('hidden');
            statusActive.classList.add('hidden');
            statusDead.classList.add('hidden');
            statusUnknown.classList.add('hidden');
            
            fetch(statusURL)
                .then(response => response.json())
                .then(data => {
                    statusLoading.classList.add('hidden');

                    if (data.status && data.status.toUpperCase() === "ACTIVE") {
                        statusActive.classList.remove('hidden');
                        latencyElement.textContent = data.delay || '-';
                    } else {
                        statusDead.classList.remove('hidden');
                        latencyElement.textContent = '-';
                    }
                })
                .catch(error => {
                    statusLoading.classList.add('hidden');
                    statusUnknown.classList.remove('hidden');
                    latencyElement.textContent = '-';
                    console.error("Fetch error:", error);
                });
        }

        function showProxyListSection() {
            proxyListSection.classList.remove("hidden");
            accountCreationSection.classList.add("hidden");
            resultSection.classList.add('hidden');
        }
        
        function showAccountCreationSection() {
            proxyListSection.classList.add("hidden");
            accountCreationSection.classList.remove("hidden");
            resultSection.classList.add('hidden');
        }
        
        function loadProxyList(url) {
            loadingIndicator.classList.remove('hidden');
            proxyListContainer.innerHTML = '';
            noProxiesMessage.classList.add("hidden");

            const proxyFetchers = [
                async () => {
                    const response = await fetch(url);
                    if (!response.ok) {
                        throw new Error("Direct fetch failed");
                    }
                    return await response.text();
                },
                async () => {
                    const proxyUrl = `https://cors.checker-ip.web.id/?url=${url}`;
                    const response = await fetch(proxyUrl);
                    if (!response.ok) {
                        throw new Error("CORS proxy failed");
                    }
                    return await response.text();
                },
                async () => {
                    const proxyUrl = `https://cors.checker-ip.web.id/?url=${encodeURIComponent(url)}`;
                    const response = await fetch(proxyUrl);
                    if (!response.ok) {
                        throw new Error("Encoded proxy failed");
                    }
                    const data = await response.json();
                    return data.contents;
                }
            ];

            (async function fetchDataFromProxies(proxyIndex = 0) {
                if (proxyIndex >= proxyFetchers.length) {
                    console.error("All proxies failed");
                    loadingIndicator.classList.add("hidden");
                    noProxiesMessage.classList.remove("hidden");
                    displayFallbackProxyList();
                    return;
                }

                try {
                    const data = await proxyFetchers[proxyIndex]();
                    console.log("Fetched data:", data.substring(0, 200) + '...');
                    processProxyData(data);
                    loadingIndicator.classList.add('hidden');
                } catch (error) {
                    console.error("Proxy " + url + " failed:", error);
                    fetchDataFromProxies(proxyIndex + 1);
                }
            })();
        }

        function generateUUIDv4() {
            return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, char => {
                const randomValue = Math.random() * 0x10 | 0;
                const value = char === 'x' ? randomValue : randomValue & 0x3 | 0x8;
                return value.toString(16);
            });
        }

        function generateUUID(inputElementId) {
            document.getElementById(inputElementId).value = generateUUIDv4();
        }

        function generatePassword(inputElementId) {
            document.getElementById(inputElementId).value = generateUUIDv4();
        }
    </script>
</body>
    </html>
